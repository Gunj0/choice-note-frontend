# èªè¨¼èªå¯è¿½åŠ 

## æ–¹é‡

- Next.js + Auth.js

## å®Ÿè£…

### å‚è€ƒ

- [Auth.js: Get Started](https://authjs.dev/getting-started/installation?framework=Next.js)

### Auth.js ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

- [Auth.js](https://authjs.dev/getting-started)
  - NextAuth.js ãŒ v5 ã‹ã‚‰åç§°ã‚’å¤‰ãˆã¦ Next.js å°‚ç”¨ã§ã¯ãªããªã£ãŸã‚‚ã®
    - Cloudflare ã® Edge ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ã¯ Auth.js ã®ã¿å¯¾å¿œã—ã¦ã„ã‚‹
  - 2026/1/3 æ™‚ç‚¹ã§ã¯ã¾ã ãƒ™ãƒ¼ã‚¿ç‰ˆ

```zsh
% npm install next-auth@beta
```

### AUTH_SECRET ç’°å¢ƒå¤‰æ•°è¿½åŠ 

```zsh
% npx auth secret
Need to install the following packages:
auth@1.2.3
Ok to proceed? (y) y

ğŸ“ Created ~/.env.local with `AUTH_SECRET`.
```

### scr/auth.ts ä½œæˆ

```ts
import NextAuth from "next-auth";

export const { handlers, signIn, signOut, auth } = NextAuth({
  providers: [
    // ã‚ã¨ã§è¿½åŠ 
  ],
});
```

### src/app/api/auth/[...nextauth]/route.ts

- `auth.ts`ã‚’å‚ç…§ã—ã¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹

```ts
import { handlers } from "@/auth";
export const { GET, POST } = handlers;
```

### src/middleware.ts

- ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç¶­æŒã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
- å‘¼ã°ã‚Œã‚‹ãŸã³ã«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æœ‰åŠ¹æœŸé™ãŒæ›´æ–°ã•ã‚Œã‚‹

```ts
export { auth as middleware } from "@/auth";
```

### Callbacks ã®è¨­å®š

- https://next-auth.js.org/configuration/callbacks
